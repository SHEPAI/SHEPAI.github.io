class Stack{constructor(){this.size=10;this.items=[]}push(element){if(this.items.length<=this.size){this.items.push(element)}else{this.items.shift();this.items.push(element)}}pop(element){if(this.items.length==0){return"overflow"}else{return this.items.pop()}}isEmpty(){if(this.items.length==0){return true}else{return false}}}var loadedQs=[];var stack=new Stack();var startNumA=0;var numA=0;var typeOfDisplay="";var con=new WebSocket("ws://80.5.202.205:8080")var letIn=false;con.onopen=function(){con.send("Connect")};con.onerror=function(error){console.log("error"+error)};con.onmessage=function(e){console.log("message:"+e.data);var output=e.data;if(output=="signInRequestGranted"){letIn=true;var x=document.getElementById("signIn");x.style.display="none"}else if(output=="ERROR"){alert("there was a problem doing what you just did")}else{loadedQs=output.split(":::");document.getElementById("View").innerHTML='<a onClick="undo()"><p style="cursor: pointer;"><u> Undo Deletion </u></p></a>';for(var i=0;i<loadedQs.length;i++){if(loadedQs[0]!=""){var add;console.log(typeOfDisplay);if(typeOfDisplay=="V"){add='<br id="'+numA+'"><button oncontextmenu="Delete('+"'"+numA+"'"+')" onClick="addQ('+"'"+numA+"'"+')" id="'+numA+'" class="userMessage">'+loadedQs[i]+'</button><div id="'+numA+'" class="msgBrk"></div>'}else if(typeOfDisplay=="R"){add='<br id="'+numA+'"><button oncontextmenu="DeleteR('+"'"+numA+"'"+')" onClick="addR('+"'"+numA+"'"+')" id="'+numA+'" class="userMessage">'+loadedQs[i]+'</button><div id="'+numA+'" class="msgBrk"></div>'}else{add='<br id="'+numA+'"><button oncontextmenu="DeleteF('+"'"+numA+"'"+')" id="'+numA+'" class="userMessage">'+loadedQs[i]+'</button><div id="'+numA+'" class="msgBrk"></div>'}numA=numA+1;document.getElementById("View").innerHTML+=add+"<br><br><br>"}}removeTopA()}};function viewReport(){stack=new Stack();if(letIn==true){typeOfDisplay="R";document.getElementById("View").innerHTML="";var x=document.getElementById("View");x.style.display="block";x=document.getElementById("alertAdd");x.style.display="none";x=document.getElementById("alertDelete");x.style.display="none";con.send("REPORT")}else{alert("Sign in to do this")}}function viewAll(){stack=new Stack();console.log("view");if(letIn==true){startNumA=0;numA=0;typeOfDisplay="V";document.getElementById("View").innerHTML="";var x=document.getElementById("View");x.style.display="block";x=document.getElementById("alertAdd");x.style.display="none";x=document.getElementById("alertDelete");x.style.display="none";con.send("VIEWDATA")}else{alert("Sign in to do this")}}function viewFeedback(){stack=new Stack();console.log("view");if(letIn==true){startNumA=0;numA=0;typeOfDisplay="FB";document.getElementById("View").innerHTML="";var x=document.getElementById("View");x.style.display="block";x=document.getElementById("alertAdd");x.style.display="none";x=document.getElementById("alertDelete");x.style.display="none";con.send("VIEWFEEDBACK")}else{alert("Sign in to do this")}}function addQ(idNum){console.log("add");if(letIn){document.getElementById(idNum).remove();var question=document.getElementById(idNum).textContent;console.log(question);var text=prompt("Please enter Your response","");text=text.replace("---","");text=text.replace(":::","");text=text.replace("signInRequest:","");text=text.replace("DELETE","delete");if(text.length<500){if(text==null||text==""){alert("cancelled")}else{con.send("ADD"+question+"---"+text);document.getElementById(idNum).remove();document.getElementById(idNum).remove()}}else{alert("Please decrease your message size")}}else{alert("Sign in to do this")}}function addR(idNum){if(letIn){document.getElementById(idNum).remove();var question=document.getElementById(idNum).textContent;console.log(question);var text=prompt("Please enter Your response","");text=text.replace("---","");text=text.replace(":::","");text=text.replace("signInRequest:","");text=text.replace("DELETE","delete");if(text.length<500){if(text==null||text==""){alert("cancelled")}else{con.send("RADD"+question+"---"+text);document.getElementById(idNum).remove();document.getElementById(idNum).remove()}}else{alert("Please decrease your message size")}}else{alert("Sign in to do this")}}function Delete(idNum){console.log("delete");if(letIn){document.getElementById(idNum).remove();var question=document.getElementById(idNum).textContent;con.send("DELETE"+question);document.getElementById(idNum).remove();document.getElementById(idNum).remove();stack.push(question)}else{alert("Sign in to do this")}}function undo(){if(!(stack.isEmpty())){var item=stack.pop();if(typeOfDisplay=="V"){con.send("QADD"+item);viewAll()}else{con.send("FADD"+item);viewFeedback()}}}function DeleteR(idNum){console.log("delete reported");if(letIn){document.getElementById(idNum).remove();var question=document.getElementById(idNum).textContent;con.send("DELETER"+question);document.getElementById(idNum).remove();document.getElementById(idNum).remove()}else{alert("Sign in to do this")}}function DeleteF(idNum){console.log("delete reported");if(letIn){document.getElementById(idNum).remove();var question=document.getElementById(idNum).textContent;con.send("DELETEF"+question);document.getElementById(idNum).remove();document.getElementById(idNum).remove();stack.push(question)}else{alert("Sign in to do this")}}function signIn(){var usname=document.getElementById("uname").value;var psw_d=document.getElementById("paswo").value;con.send("signInRequest:"+usname+"--"+psw_d)}function addOwn(){if(letIn){var x=document.getElementById("alertAdd");x.style.display="block";x=document.getElementById("View");x.style.display="none";x=document.getElementById("alertDelete");x.style.display="none"}else{alert("Sign in to do this")}}function deleteOwn(){if(letIn){var x=document.getElementById("alertAdd");x.style.display="none";x=document.getElementById("View");x.style.display="none";x=document.getElementById("alertDelete");x.style.display="block"}else{alert("Sign in to do this")}}function saveQuestionAnswer(){if(letIn){var q=document.getElementById("inputQ1").value;var a=document.getElementById("inputQ2").value;q=q.replace("---","");q=q.replace(":","");q=q.toLowerCase();q=q.replace("?","");q=q.replace(".","");q=q.replace(",","");q=q.replace("DELETE","delete");a=a.replace("---","");a=a.replace(":::","");a=a.replace("DELETE","delete");if(a.length+q.length<530){if(q!=""&&a!=""){con.send("ADD"+q+"---"+a);document.getElementById("inputQ1").value="";document.getElementById("inputQ2").value=""}else{alert("You cannot add that")}}else{alert("Please decrease your message size")}}else{alert("Sign in to do this")}}function delQuestionAnswer(){if(letIn){var a=document.getElementById("inputD1").value;a=a.replace("---","");a=a.replace(":::","");a=a.replace("DELETE","delete");a=a.toLowerCase();if(a.length<500){if(a!=""){con.send("DELQUE"+a);document.getElementById("inputD1").value=""}else{alert("You cannot delete that")}}else{alert("Please decrease your message size")}}else{alert("Sign in to do this")}}function removeTopA(){if(numA+startNumA>10){document.getElementById(startNumA.toString()).remove();document.getElementById((startNumA+1).toString()).remove();document.getElementById(startNumA.toString()).remove();document.getElementById((startNumA+1).toString()).remove();document.getElementById(startNumA.toString()).remove();document.getElementById((startNumA+1).toString()).remove();startNumA+=2}}